# create-session

指定したメンバーの次回1on1セッション用のファイルを作成し、話すべき話題を提案します。

## 引数

- `$ARGUMENTS`: ユーザー名（必須）

## 手順

### 1. 入力検証

- `$ARGUMENTS` が空の場合、`./users/` 配下のユーザー一覧を表示して選択を促す
- 指定されたユーザーのディレクトリが存在しない場合、エラーを表示

### 2. 情報収集

以下のファイルを読み込む：

- `./manager-profile.md` - マネージャープロファイル
- `./users/$ARGUMENTS/profile.md` - ユーザープロファイル
- `./users/$ARGUMENTS/sessions/` 配下の直近最大10件のセッションファイル（日付降順）

### 3. メンバーからのリクエスト確認

ユーザーに質問：「メンバーから事前に話したいことのリクエストはありますか？（なければEnter）」

### 4. 話題提案の生成（3〜4段階レビュー）

#### Step 1: マネージャーエージェントによる初稿作成

`./manager-profile.md` の指示に従い、話題を3〜5個提案

#### Step 2: EMベストプラクティスエージェントによるレビュー

`./agents/em-best-practice.md` の指示に従い、Step 1の出力をレビュー

#### Step 3: 技術エージェントによるレビュー

メンバーの**役割**に応じて、適切な技術エージェントを選択してレビュー：

| 役割 | エージェントファイル |
|------|---------------------|
| QAエンジニア | `./agents/tech-specialist-qa.md` |
| SRE / インフラエンジニア | `./agents/tech-specialist-sre.md` |
| MLエンジニア | `./agents/tech-specialist-ml.md` |
| Backendエンジニア | `./agents/tech-specialist-backend.md` |

※ 役割が上記に該当しない場合は、最も近いものを選択するか、スキップ

#### Step 4: キャリアエージェントによるレビュー（オプショナル）

`./agents/career-agent.md` の指示に従い、以下の条件に該当する場合のみレビューを実施：

- パフォーマンスが実感できていない
- 転職可能性が高い（在籍2〜3年超、成長機会への不満など）
- 昇進・役割変更を望んでいる（リーダー、マネージャー志向など）
- スキルチェンジを検討している（職種転換：QA→開発、開発→SREなど）
- キャリアの方向性に迷いがある（本人が明確に言語化できていない）
- 社外活動が増えている（副業、勉強会登壇、OSSなど）
- ライフイベントが近い（結婚、出産、介護など、キャリア観に影響するもの）

該当しない場合はスキップ

### 5. 最終版の作成

各段階のレビュー結果を統合し、最終的な話題リストを作成：

- 重複を排除
- 優先度順に並べ替え
- 3〜5個に絞り込み

### 6. セッションファイルの作成

`./templates/session.md` をベースに `./users/$ARGUMENTS/sessions/YYYY-MM-DD.md` を作成：

- 今日の日付を使用
- メンバーからのリクエストがあれば記載
- 「今回話すべき話題」セクションに最終版の話題を記載
- 「各話題の背景・意図」セクションに各話題の意図を記載

### 7. 完了報告

以下を表示：
- 作成したファイルのパス
- 提案した話題のサマリー
- 「セッション後は `/complete-session` を実行してください」というリマインド

## 出力例

```
セッションファイルを作成しました: ./users/tanaka/sessions/2025-11-28.md

## 今回の話題（3件）

1. 前回話していたキャリアの方向性について
2. 最近のテスト自動化の進捗
3. チーム内でのコミュニケーションについて

セッション後は `/complete-session tanaka` を実行してください！
```
